"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/middleware.js":
/*!***************************!*\
  !*** ./src/middleware.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var cookies_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cookies-next */ \"(middleware)/./node_modules/cookies-next/lib/index.js\");\n/* harmony import */ var cookies_next__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cookies_next__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\n\nasync function middleware(req) {\n    const res = new next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse();\n    const checkUser = async ()=>{\n        try {\n            const token = (0,cookies_next__WEBPACK_IMPORTED_MODULE_0__.getCookie)(\"token\", {\n                req\n            });\n            const response = await fetch(\"http://localhost:4000/api/v1/profile\", {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Authorization: `Bearer ${token}`\n                }\n            });\n            const data = await response.json();\n            return data.success; // Return whether the user is authenticated or not\n        } catch (error) {\n            console.log(error.message);\n            return false; // Return false if there's an error\n        }\n    };\n    const isAuthenticated = await checkUser();\n    if (!isAuthenticated && !req.nextUrl.pathname.startsWith(\"/auth\")) {\n        return Response.redirect(new URL(\"/auth\", req.url));\n    }\n    if (isAuthenticated && req.nextUrl.pathname.startsWith(\"/auth\")) {\n        return Response.redirect(new URL(\"/\", req.url));\n    }\n}\nconst config = {\n    matcher: [\n        \"/((?!api|_next/static|_next/image|.*\\\\.png$).*)\"\n    ]\n};\n// Function to extract the requested page from the URL\nfunction extractRequestedPage(url) {\n    return url.pathname;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL21pZGRsZXdhcmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBeUM7QUFDRTtBQUVwQyxlQUFlRSxXQUFXQyxHQUFHO0lBQ2xDLE1BQU1DLE1BQU0sSUFBSUgscURBQVlBO0lBRTVCLE1BQU1JLFlBQVk7UUFDaEIsSUFBSTtZQUNGLE1BQU1DLFFBQVFOLHVEQUFTQSxDQUFDLFNBQVM7Z0JBQUVHO1lBQUk7WUFDdkMsTUFBTUksV0FBVyxNQUFNQyxNQUFNLHdDQUF3QztnQkFDbkVDLFFBQVE7Z0JBQ1JDLFNBQVM7b0JBQ1AsZ0JBQWdCO29CQUNoQkMsZUFBZSxDQUFDLE9BQU8sRUFBRUwsTUFBTSxDQUFDO2dCQUNsQztZQUNGO1lBQ0EsTUFBTU0sT0FBTyxNQUFNTCxTQUFTTSxJQUFJO1lBQ2hDLE9BQU9ELEtBQUtFLE9BQU8sRUFBRSxrREFBa0Q7UUFDekUsRUFBRSxPQUFPQyxPQUFPO1lBQ2RDLFFBQVFDLEdBQUcsQ0FBQ0YsTUFBTUcsT0FBTztZQUN6QixPQUFPLE9BQU8sbUNBQW1DO1FBQ25EO0lBQ0Y7SUFFQSxNQUFNQyxrQkFBa0IsTUFBTWQ7SUFFOUIsSUFBSSxDQUFDYyxtQkFBbUIsQ0FBQ2hCLElBQUlpQixPQUFPLENBQUNDLFFBQVEsQ0FBQ0MsVUFBVSxDQUFDLFVBQVU7UUFDakUsT0FBT0MsU0FBU0MsUUFBUSxDQUFDLElBQUlDLElBQUksU0FBU3RCLElBQUl1QixHQUFHO0lBQ25EO0lBRUEsSUFBSVAsbUJBQW1CaEIsSUFBSWlCLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDQyxVQUFVLENBQUMsVUFBVTtRQUMvRCxPQUFPQyxTQUFTQyxRQUFRLENBQUMsSUFBSUMsSUFBSSxLQUFLdEIsSUFBSXVCLEdBQUc7SUFDL0M7QUFDRjtBQUVPLE1BQU1DLFNBQVM7SUFDcEJDLFNBQVM7UUFBQztLQUFrRDtBQUM5RCxFQUFFO0FBRUYsc0RBQXNEO0FBQ3RELFNBQVNDLHFCQUFxQkgsR0FBRztJQUMvQixPQUFPQSxJQUFJTCxRQUFRO0FBQ3JCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9taWRkbGV3YXJlLmpzP2E0OWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0Q29va2llIH0gZnJvbSBcImNvb2tpZXMtbmV4dFwiO1xuaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtaWRkbGV3YXJlKHJlcSkge1xuICBjb25zdCByZXMgPSBuZXcgTmV4dFJlc3BvbnNlKCk7XG5cbiAgY29uc3QgY2hlY2tVc2VyID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0b2tlbiA9IGdldENvb2tpZShcInRva2VuXCIsIHsgcmVxIH0pO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9hcGkvdjEvcHJvZmlsZVwiLCB7XG4gICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgcmV0dXJuIGRhdGEuc3VjY2VzczsgLy8gUmV0dXJuIHdoZXRoZXIgdGhlIHVzZXIgaXMgYXV0aGVudGljYXRlZCBvciBub3RcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIFJldHVybiBmYWxzZSBpZiB0aGVyZSdzIGFuIGVycm9yXG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGlzQXV0aGVudGljYXRlZCA9IGF3YWl0IGNoZWNrVXNlcigpO1xuXG4gIGlmICghaXNBdXRoZW50aWNhdGVkICYmICFyZXEubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKFwiL2F1dGhcIikpIHtcbiAgICByZXR1cm4gUmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTChcIi9hdXRoXCIsIHJlcS51cmwpKTtcbiAgfVxuXG4gIGlmIChpc0F1dGhlbnRpY2F0ZWQgJiYgcmVxLm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aChcIi9hdXRoXCIpKSB7XG4gICAgcmV0dXJuIFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoXCIvXCIsIHJlcS51cmwpKTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBtYXRjaGVyOiBbXCIvKCg/IWFwaXxfbmV4dC9zdGF0aWN8X25leHQvaW1hZ2V8LipcXFxcLnBuZyQpLiopXCJdLFxufTtcblxuLy8gRnVuY3Rpb24gdG8gZXh0cmFjdCB0aGUgcmVxdWVzdGVkIHBhZ2UgZnJvbSB0aGUgVVJMXG5mdW5jdGlvbiBleHRyYWN0UmVxdWVzdGVkUGFnZSh1cmwpIHtcbiAgcmV0dXJuIHVybC5wYXRobmFtZTtcbn1cbiJdLCJuYW1lcyI6WyJnZXRDb29raWUiLCJOZXh0UmVzcG9uc2UiLCJtaWRkbGV3YXJlIiwicmVxIiwicmVzIiwiY2hlY2tVc2VyIiwidG9rZW4iLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJkYXRhIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlIiwiaXNBdXRoZW50aWNhdGVkIiwibmV4dFVybCIsInBhdGhuYW1lIiwic3RhcnRzV2l0aCIsIlJlc3BvbnNlIiwicmVkaXJlY3QiLCJVUkwiLCJ1cmwiLCJjb25maWciLCJtYXRjaGVyIiwiZXh0cmFjdFJlcXVlc3RlZFBhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.js\n");

/***/ })

});